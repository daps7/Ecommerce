{"ast":null,"code":"var _jsxFileName = \"C:\\\\nodejs_projects\\\\Ecommerce\\\\client\\\\src\\\\components\\\\Register.js\";\nimport React, { Component } from \"react\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport LinkInClass from \"../components/LinkInClass\";\nimport { SERVER_HOST } from \"../config/global_constants\";\nexport default class Register extends Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n    this.handleSubmit = e => {\n      e.preventDefault();\n      if (this.state.password !== this.state.confirmPassword) {\n        this.setState({\n          errorMessage: \"Passwords do not match\"\n        });\n        return;\n      }\n      const user = {\n        first_name: this.state.name.split(' ')[0],\n        last_name: this.state.name.split(' ')[1] || '',\n        username: this.state.name,\n        email: this.state.email,\n        password: this.state.password\n      };\n      axios.post(`${SERVER_HOST}/users/register`, user).then(res => {\n        if (res.data) {\n          if (res.data.errorMessage) {\n            this.setState({\n              errorMessage: res.data.errorMessage\n            });\n          } else\n            // user successfully registered\n            {\n              console.log(\"User registered\");\n              this.setState({\n                isRegistered: true\n              });\n            }\n        } else {\n          this.setState({\n            errorMessage: \"Registration failed\"\n          });\n        }\n      });\n    };\n    this.state = {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n      errorMessage: \"\",\n      isRegistered: false\n    };\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-container\",\n      noValidate: true,\n      id: \"loginOrRegistrationForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, this.state.isRegistered ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 44\n      }\n    }) : null, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    }, \"New User Registration\"), this.state.errorMessage && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 45\n      }\n    }, this.state.errorMessage), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"name\",\n      type: \"text\",\n      placeholder: \"Name\",\n      autoComplete: \"name\",\n      value: this.state.name,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"email\",\n      type: \"email\",\n      placeholder: \"Email\",\n      autoComplete: \"email\",\n      value: this.state.email,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"password\",\n      type: \"password\",\n      placeholder: \"Password\",\n      autoComplete: \"password\",\n      title: \"Password must be at least ten-digits long and contains at least one lowercase letter, one uppercase letter, one digit and one of the following characters (\\xA3!#\\u20AC$%^&*)\",\n      value: this.state.password,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"confirmPassword\",\n      type: \"password\",\n      placeholder: \"Confirm password\",\n      autoComplete: \"confirmPassword\",\n      value: this.state.confirmPassword,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 24\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"green-button\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, \"Register New User\"), /*#__PURE__*/React.createElement(Link, {\n      className: \"red-button\",\n      to: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }, \"Cancel\"));\n  }\n}","map":{"version":3,"names":["React","Component","Redirect","Link","axios","LinkInClass","SERVER_HOST","Register","constructor","props","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","state","password","confirmPassword","errorMessage","user","first_name","split","last_name","username","email","post","then","res","data","console","log","isRegistered","render","createElement","className","noValidate","id","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","to","type","placeholder","autoComplete","onChange","title","onClick"],"sources":["C:/nodejs_projects/Ecommerce/client/src/components/Register.js"],"sourcesContent":["import React, {Component} from \"react\"\nimport {Redirect, Link} from \"react-router-dom\"\nimport axios from \"axios\"\n\nimport LinkInClass from \"../components/LinkInClass\"\n\nimport {SERVER_HOST} from \"../config/global_constants\"\n\n\nexport default class Register extends Component\n{\n    constructor(props)\n    {\n        super(props)\n        \n        this.state = {\n            name: \"\",\n            email: \"\",\n            password: \"\",\n            confirmPassword: \"\",\n            errorMessage: \"\",\n            isRegistered: false\n        } \n    }\n    \n    \n    handleChange = (e) => \n    {\n        this.setState({[e.target.name]: e.target.value})\n    }\n    \n    \n    handleSubmit = (e) => \n    {\n        e.preventDefault()\n\n        if (this.state.password !== this.state.confirmPassword) {\n            this.setState({errorMessage: \"Passwords do not match\"})\n            return\n        }\n\n        const user = {\n            first_name: this.state.name.split(' ')[0],\n            last_name: this.state.name.split(' ')[1] || '',\n            username: this.state.name,\n            email: this.state.email,\n            password: this.state.password\n        }\n\n        axios.post(`${SERVER_HOST}/users/register`, user)\n        .then(res => \n        {     \n            if(res.data)\n            {\n                if (res.data.errorMessage)\n                {\n                    this.setState({errorMessage: res.data.errorMessage})\n                }\n                else // user successfully registered\n                { \n                    console.log(\"User registered\")                    \n                    this.setState({isRegistered:true})\n                }        \n            }\n            else\n            {\n                this.setState({errorMessage: \"Registration failed\"})\n            }\n        })   \n    }\n\n\n    render() \n    {     \n        return (\n            <form className=\"form-container\" noValidate={true} id=\"loginOrRegistrationForm\">\n           \n                {this.state.isRegistered ? <Redirect to=\"/home\"/> : null} \n            \n                <h2>New User Registration</h2>\n                \n                {this.state.errorMessage && <p className=\"error\">{this.state.errorMessage}</p>}\n           \n                <input  \n                    name=\"name\"              \n                    type=\"text\"\n                    placeholder=\"Name\"\n                    autoComplete=\"name\"\n                    value={this.state.name}\n                    onChange={this.handleChange}\n                /><br/>           \n\n                <input  \n                    name=\"email\"              \n                    type=\"email\"\n                    placeholder=\"Email\"\n                    autoComplete=\"email\"\n                    value={this.state.email}\n                    onChange={this.handleChange}\n                /><br/>              \n\n                <input  \n                    name=\"password\"           \n                    type=\"password\"\n                    placeholder=\"Password\"\n                    autoComplete=\"password\"\n                    title=\"Password must be at least ten-digits long and contains at least one lowercase letter, one uppercase letter, one digit and one of the following characters (£!#€$%^&*)\"\n                    value={this.state.password}\n                    onChange={this.handleChange}\n                /><br/>           \n\n                <input          \n                    name=\"confirmPassword\"    \n                    type=\"password\"\n                    placeholder=\"Confirm password\"\n                    autoComplete=\"confirmPassword\"\n                    value={this.state.confirmPassword}\n                    onChange={this.handleChange}\n                /><br/><br/>\n                \n                <button type=\"button\" className=\"green-button\" onClick={this.handleSubmit}>Register New User</button>\n                <Link className=\"red-button\" to={\"/home\"}>Cancel</Link>   \n            </form>\n        )\n    }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}